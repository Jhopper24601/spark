var sockets = require('../sockets.js');
var screen = require('../screen.js');
var nconf = require('nconf');
var util = require('../util.js');

nconf.argv()
     .env()
     .file({file: '../config.json'});

sockets.setConfig(nconf);
screen.setConfig(nconf);

var blue_hex = [11,105,227, 94,141,201, 100,102,103, 74,75,75, 85,86,87, 157,160,162, 31,99,186, 4,113,254, 4,113,254, 4,113,254, 4,112,251, 93,125,166, 136,139,140, 75,77,78, 77,78,79, 135,138,139, 95,132,176, 5,109,243, 4,113,254, 91,139,198, 98,141,195, 78,128,193, 90,136,194, 109,149,197, 5,107,238, 4,113,254, 4,113,254, 4,113,254, 4,113,254, 39,100,178, 120,157,203, 74,127,194, 78,129,194, 113,153,201, 58,110,177, 4,113,254, 39,111,203, 100,150,214, 4,112,252, 4,113,254, 4,113,254, 76,127,192, 98,127,164, 4,113,254, 4,113,254, 4,113,254, 5,107,240, 130,164,206, 17,102,211, 4,113,254, 4,113,254, 16,102,213, 146,176,211, 7,104,228, 126,161,204, 19,102,209, 4,113,254, 4,113,254, 4,113,254, 6,105,233, 130,162,202, 37,99,179, 19,96,197, 16,97,203, 87,121,165, 92,138,197, 4,113,254, 4,113,254, 4,113,254, 4,113,254, 72,126,194, 144,147,148, 109,149,199, 4,113,254, 4,113,254, 4,113,254, 4,113,254, 4,113,254, 81,130,192, 144,175,212, 120,159,205, 115,154,204, 154,182,217, 26,104,203, 4,113,254, 4,113,254, 4,113,254, 4,113,254, 14,102,216, 199,202,204, 147,175,210, 27,103,202, 4,113,254, 4,113,254, 4,113,254, 7,104,230, 113,159,218, 6,106,235, 4,113,254, 4,113,254, 33,106,201, 92,146,215, 4,113,254, 4,113,254, 4,113,254, 4,113,254, 70,132,211, 54,117,199, 15,106,223, 93,148,219, 26,103,203, 27,103,202, 23,102,205, 93,137,194, 33,106,201, 4,113,254, 4,113,254, 4,113,254, 4,113,254, 71,133,211, 52,114,194, 23,103,206, 23,103,207, 49,113,194, 89,144,214, 4,113,254, 4,113,254, 116,160,213, 172,175,176, 167,171,173, 166,168,169, 191,195,196, 5,107,239, 4,113,254, 4,113,254, 4,113,254, 4,113,254, 40,110,201, 200,202,203, 163,167,170, 162,167,168, 200,205,206, 59,119,197, 4,113,254];
var blue_hex_w = 18;
var blue_hex_h = 8;

var orange_hex = [244,150,28, 161,114,54, 155,153,152, 181,180,180, 170,169,168, 98,95,93, 224,156,69, 251,142,1, 251,142,1, 251,142,1, 251,143,4, 162,130,89, 119,116,115, 180,178,177, 178,177,176, 120,117,116, 160,123,79, 250,146,12, 251,142,1, 164,116,57, 157,114,60, 177,127,62, 165,119,61, 146,106,58, 250,148,17, 251,142,1, 251,142,1, 251,142,1, 251,142,1, 216,155,77, 135,98,52, 181,128,61, 177,126,61, 142,102,54, 197,145,78, 251,142,1, 216,144,52, 155,105,41, 251,143,3, 251,142,1, 251,142,1, 179,128,63, 157,128,91, 251,142,1, 251,142,1, 251,142,1, 250,148,15, 125,91,49, 238,153,44, 251,142,1, 251,142,1, 239,153,42, 109,79,44, 248,151,27, 129,94,51, 236,153,46, 251,142,1, 251,142,1, 251,142,1, 249,150,22, 125,93,53, 218,156,76, 236,159,58, 239,158,52, 168,134,90, 163,117,58, 251,142,1, 251,142,1, 251,142,1, 251,142,1, 183,129,61, 111,108,107, 146,106,56, 251,142,1, 251,142,1, 251,142,1, 251,142,1, 251,142,1, 174,125,63, 111,80,43, 135,96,50, 140,101,51, 101,73,38, 229,151,52, 251,142,1, 251,142,1, 251,142,1, 251,142,1, 241,153,39, 56,53,51, 108,80,45, 228,152,53, 251,142,1, 251,142,1, 251,142,1, 248,151,25, 142,96,37, 249,149,20, 251,142,1, 251,142,1, 222,149,54, 163,109,40, 251,142,1, 251,142,1, 251,142,1, 251,142,1, 185,123,44, 201,138,56, 240,149,32, 162,107,36, 229,152,52, 228,152,53, 232,153,50, 162,118,61, 222,149,54, 251,142,1, 251,142,1, 251,142,1, 251,142,1, 184,122,44, 203,141,61, 232,152,49, 232,152,48, 206,142,61, 166,111,41, 251,142,1, 251,142,1, 139,95,42, 83,80,79, 88,84,82, 89,87,86, 64,60,59, 250,148,16, 251,142,1, 251,142,1, 251,142,1, 251,142,1, 215,145,54, 55,53,52, 92,88,85, 93,88,87, 55,50,49, 196,136,58, 251,142,1];
var orange_hex_w = 18;
var orange_hex_h = 8;

var fog = [4,2,0, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 252,144,3, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 252,144,3, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 97,55,1, 39,22,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 112,64,1, 199,114,2, 10,5,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 185,106,2, 132,76,2, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 252,144,3, 252,144,3, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 30,17,0, 176,101,2, 10,5,0, 252,144,3, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 252,144,3, 252,144,3, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 4,2,0, 252,144,3, 252,144,3, 252,144,3, 4,2,0, 4,2,0, 4,2,0];
var fog_w = 25;
var fog_h = 8;

var father = [253,252,251, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 252,150,18, 253,246,236, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,150,18, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,145,6, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,148,12, 252,144,3, 253,252,251, 252,144,3, 253,243,231, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,246,236, 252,150,18, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 253,233,207, 252,163,47, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,246,236, 252,150,18, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,233,207, 252,163,47, 252,144,3, 252,144,3, 252,144,3, 253,251,248, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,246,236, 252,150,18, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,233,207, 252,163,47, 252,144,3, 252,144,3, 252,144,3];
var father_w = 32;
var father_h = 8;

var vatter = [251,142,1, 251,142,1, 251,142,1, 251,142,1, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 252,149,16, 251,144,7, 255,253,250, 255,253,250, 255,253,250, 255,253,250, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 255,253,250, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,149,16, 251,142,1, 252,144,3, 252,144,3, 255,253,250, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 255,253,250, 252,144,3, 252,144,3, 252,144,3, 255,253,250, 253,252,251, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 251,142,1, 251,142,1, 251,142,1, 255,253,250, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 251,142,1, 255,253,250, 252,144,3, 252,144,3, 255,253,250, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 251,142,1, 252,144,3, 252,144,3, 255,253,250, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 251,142,1, 255,253,250, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 251,142,1, 252,144,3, 252,144,3, 255,253,250, 252,145,6, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,148,12, 252,144,3, 253,252,251, 252,144,3, 251,146,9, 252,144,3, 255,253,250, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 253,252,251, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 255,253,250, 252,148,13, 252,144,3, 253,252,251, 253,252,251, 253,252,251, 253,252,251, 252,144,3, 252,144,3, 253,233,207, 252,163,47, 252,144,3, 252,144,3, 253,252,251, 251,142,1, 252,144,3, 255,253,250, 255,253,250, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 255,253,250, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 255,253,250, 252,149,15, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,233,207, 252,163,47, 252,144,3, 252,144,3, 252,144,3, 251,142,1, 252,144,3, 255,253,250, 255,253,250, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 255,253,250, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 251,142,1, 252,149,15, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 252,144,3, 253,233,207, 252,163,47, 252,144,3, 252,144,3, 252,144,3];
var vatter_w = 32;
var vatter_h = 8;

var pac0 = [255,255,255, 255,255,255, 255,255,255, 255,255,255, 77,77,13, 68,68,13, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 75,75,0, 222,222,0, 255,255,0, 255,255,0, 63,63,0, 255,255,255, 255,255,255, 255,255,255, 255,255,0, 255,255,0, 255,255,0, 124,124,0, 255,255,255, 255,255,255, 255,255,255, 127,127,0, 255,255,0, 252,252,0, 102,102,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 146,146,0, 255,255,0, 251,251,0, 62,62,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 42,42,0, 255,255,0, 255,255,0, 254,254,0, 76,76,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 113,113,0, 255,255,0, 255,255,0, 255,255,0, 64,64,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 59,59,13, 134,134,13, 130,130,13, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 77,77,13, 68,68,13, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 75,75,0, 222,222,0, 255,255,0, 255,255,0, 63,63,0, 255,255,255, 255,255,255, 255,255,255, 255,255,0, 255,255,0, 255,255,0, 124,124,0, 255,255,255, 255,255,255, 255,255,255, 127,127,0, 255,255,0, 252,252,0, 102,102,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 146,146,0, 255,255,0, 251,251,0, 62,62,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 42,42,0, 255,255,0, 255,255,0, 254,254,0, 76,76,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 113,113,0, 255,255,0, 255,255,0, 255,255,0, 64,64,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 59,59,13, 134,134,13, 130,130,13, 255,255,255, 255,255,255];
var pac0_w = 16;
var pac0_h = 8;

var pac1 = [255,255,255, 255,255,255, 255,255,255, 255,255,255, 77,77,13, 68,68,13, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 75,75,0, 222,222,0, 255,255,0, 255,255,0, 63,63,0, 255,255,255, 255,255,255, 255,255,255, 255,255,0, 255,255,0, 255,255,0, 124,124,0, 255,255,255, 255,255,255, 255,255,255, 127,127,0, 255,255,0, 252,252,0, 102,102,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 146,146,0, 255,255,0, 251,251,0, 62,62,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 42,42,0, 255,255,0, 255,255,0, 254,254,0, 76,76,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 113,113,0, 255,255,0, 255,255,0, 255,255,0, 64,64,0, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 59,59,13, 134,134,13, 130,130,13, 255,255,255, 255,255,255];
var pac1_w = 8;
var pac1_h = 8;

var white = [255,255,255, 255,255,255, 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 252,149,16, 251,144,7, 255,255,255, 255,255,255, 255,255,255, 255,255,255, 255,255,255 , 255,255,255, 255,255,255, 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255, 255,255,255, 255,255,255, 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 252,149,16, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255, 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255, 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255, 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 252,145,6, 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 252,148,12, 255,255,255 , 255,255,255, 255,255,255 , 251,146,9, 255,255,255 , 255,255,255, 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 252,148,13, 255,255,255 , 255,255,255, 255,255,255, 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 253,233,207, 252,163,47, 255,255,255 , 255,255,255 , 255,255,255, 255,255,255, 255,255,255 , 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 252,149,15, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 253,233,207, 252,163,47, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255, 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255, 252,149,15, 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 255,255,255 , 253,233,207, 252,163,47, 255,255,255 , 255,255,255 , 255,255,255 ];
var white_w = 32;
var white_h = 8;

var count = 0;
var on = true;
var seq = 0;
var col = 0;
var forward = true;
var drawcount = 0;

var drawing = false;

var screens = ["Freddy", "Robot"];
var brightness = 32;

function setup(message) {
  console.log("message in setup: ", message);
  var coreid = JSON.parse(message).coreid
  	screen.setup(coreid, function(){
      console.log("done with setup, setting brightness");
      screen.setBrightness([util.getNameForCoreId(coreid)], brightness, function(bright, err){
        console.log("Screen birghtness set to ", bright);
      });
      if(!drawing)
      {
        console.log("BEGIN DRAW");
        draw();   
        drawing = true;
      }
    });
};

function draw() {
  drawFogFather();
  // if(drawcount > 80)
  //   drawcount = 0;

  // console.log("drawing: ", drawcount);
  // if(drawcount >= 0 && drawcount < 31)
  // {
  //   drawPac();
  // }
  // else if(drawcount >= 31 && drawcount <= 64)
  // {
  //   drawGhost();
  // }
  // else
  // {
  //   drawcount = 0;
  //   drawPac();
  // }
  drawcount++;
}

function drawFogFather() {
    screen.drawVBMP(0, 0, function(){
      // screen.drawVBMP(32, 1, function(){
      //   // draw();
      //   console.log("drew fog and father");
      // });
    }, true);
};

function drawPac() {
  console.log("drawing pac: ", seq);
  
  col++;
  if(col > 63)
    col = 0; 

  seq++;
  if(seq > 2)
    seq = 0;

  screen.drawVBMP(col, seq, function(){
      draw();
  });
};

function main() {
  screen.addBitmap(fog, fog_w, fog_h, 0);
  screen.addBitmap(father, father_w, father_h, 1);
  // screen.addBitmap(vatter, vatter_w, vatter_h, 2);
  // screen.addBitmap(blue_hex, blue_hex_w, blue_hex_h, 2);
  // screen.addBitmap(orange_hex, orange_hex_w, orange_hex_h, 4);

	sockets.registerListener(function(message){
    console.log("setting up fog with message ", message);
    setup(message);
  });
};

main();